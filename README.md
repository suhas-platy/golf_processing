# What this is

Experiments with EEG data, originally starting with the old ABM golf data.

# Setup 

## Data

Download from Dropbox and put it in ../data.  Keep the original folder names; e.g., put Science And Research\Data Aquisition\ABM - Old Golf Data in ../data/ABM - Old Golf Data.

### ABM - Old Golf Data

0261, etc.

* Original files:  ---.ebs.edf and ---.Markers.csv, where --- is the subject ID plus trail info.    
* Files generated by labx_conversion.blab (GetDataQuality, etc.): ---.ebs.edf_Data.csv, ---.ebs.edf_DataQuality.csv, and ---Markers.mrk_Paired.csv
* Files generated by labx_conversion2.blab (ExportABMFormat; converts to EEGLAB and CSV format): ---.ebs.edf.EEGLAB.edf, ---.ebs.edf_EEGLAB.csv, X24 Visual.ced and ---_Markers.mrk_Events_EEGLAB.csv
* Files generated by labx_process_events.blab (EditFileUsingEvents; this is supposed to cut the file based on events): ---.ebs.edited.31.1.473.1.edf
* Files generated by convert_events_shell.m

* Subject 261, session 501  
* Prep to start (first two): 98-84 = 14s, 138-122 = 16s; max 16s  
* Start to putt (first two): 104-98 = 8s, 144-138 = 6s; max 8s  
* Putt to end (first two): 108-104 = 4s, 147-144 = 3s; max 4s  
* Success: 1, 0, 0, 0, 1, 0, 0, 0, 1, 1  
  (4 success 1,5,9, and 10; 6 non-success 2,3,4,6,7, and 8)

### AMB Kangaroo Data

0001_0, etc.

### TPI Alpha Test July 2018

Testdata, TestData2 and testdata3 (and Reports).  Cognionics Q20 headset.  500 Hz sampling.  

* Original files:
````
Testdata_flanker_arrows_2018-07-05_07-32-07_1.xdf
Testdata_flanker_arrows_training_2018-07-05_07-31-02_1.xdf
Testdata_threecvt_2018-07-05_07-44-51_1.xdf
Testdata_twoback_2018-07-05_07-13-51_1.xdf
Testdata_twoback_training_2018-07-05_07-12-42_1.xdf
Testdata_visual_arrest_2018-07-05_07-11-14_1.xdf
````

## Software

### NeuroPype

### MNE

Follow instructions here: https://martinos.org/mne/stable/install_mne_python.html#get-mne-and-its-dependencies
Everytime you start a session, you'll have to do `activate mne`

### LabX

### EEGLab

# Running

## ABM - Old Golf Data

Update subject numbers, session numbers, etc. in labx2eeglab_shell.m; this will make BLAB files in the data directories.  Run each BLAB file in its own directory with LabX.  This will produce EDF and CSV files.
* If the command window disappers, press the Reset Config button in the upper left.
* This will make these files: ---.ebs.edf.EEGLAB.edf, ---.ebs.edf_EEGLAB.csv, X24 Visual.ced and ---_Markers.mrk_Events_EEGLAB.csv, where --- is the subject ID plus trail info.
* One at a time processing and get other files: Adapt & copy ./labx_data_quality_etc.blab and ./labx2eeglab.blab to the data directory (e.g., data\ABM - Old Golf Data\NUGA Golfers\0261\0261) you want then run in LabX.
* labx_slice_into_events.blab is there for reference; not used

Update subject number, session numbers, etc. in convert_events_shell.m to change the events file into something EEGLab can read.
* NB subj 261, session 505 has several errant markers

Open the EDF created by ./labx2eeglab_conversion_tmp.blah or ./labx2eeglab_conversion.blab in EEGLab (File->Import data...); click OK through all the dialogue boxes.
* For Suhas, C:\Users\suhas\Desktop\prjs\golf_processing\data\ABM - Old Golf Data\NUGA Golfers\0261\026111501.ebs.edf.EEGLAB.edf
* Do not view it yet (wait until events are loaded).

Then import the events using the instructions here: https://irenevigueguix.wordpress.com/2016/04/22/eeglab-tutorial-analysis-of-eeg-data-using-eeglab/, Step 3.
* File->Import event data->From Matlab ... and point it to the event file saved from the first step.
** For Suhas, C:\Users\suhas\Desktop\prjs\golf_processing\data\ABM - Old Golf Data\NUGA Golfers\0261\026111501_Markers.mrk_Events_EEGLAB_simple.csv
* Input field (column) names: latency	type	success
* Number of file header lines: 1

Then view it (Plot->Channel data (scroll)); make sure you click on Norm.

Then view the events (Settings->Events-Events On) and set the time to just before an event occurs (the time is the number between << < and > >>; e.g., 30 seconds).

If the events don't show repeat the steps starting with "Open the EDF" but skip "Then change the events."

Select Data using Events; then using Epochs

## TPI



## Etc.

tmp - old files to convert ABM files to EEGLab

ConvertRTA.py - custom node to import ABM Makers (WIP; doesn't fully work)

Frequent Domain Plotting.py - export of Frequency Domain Plotting.pyp

Frequency Domain Plotting.pyp - hit "-" several times when the file comes up; eventually only signal on the time sync will be shown

mne_view.py - shows proper EEG signals

Time Domain Plotting.pyp - important -- remove last 6 channels; also data already appears to be filtered so applying the filter on top of the data doesn't give good results

# Appendix

* Markers in flanker data
````
INFO: sending marker trial-begin at 1249562.15252
INFO: sending marker response-window-begin at 1249562.15257
INFO: sending marker right-flanker at 1249562.15259
INFO: sending marker picture-begin at 1249562.15275
INFO: sending marker picture-end at 1249562.24999
INFO: sending marker congruent-stimulus at 1249562.25005
INFO: sending marker picture-begin at 1249562.2502
INFO: sending marker picture-end at 1249562.40318
INFO: sending marker fixation-cross at 1249562.40324
INFO: sending marker crosshair-begin at 1249562.40352
INFO: sending marker arrow_right pressed at 1249562.56467
INFO: sending marker response-received-arrow_right at 1249562.57052
INFO: sending marker crosshair-end at 1249563.80291
INFO: sending marker response-window-end at 1249563.80302
INFO: sending marker response-was-correct at 1249563.80303
INFO: sending marker trial-end at 1249563.80305

INFO: sending marker trial-begin at 1249563.80306
INFO: sending marker response-window-begin at 1249563.8031
INFO: sending marker right-flanker at 1249563.80311
INFO: sending marker picture-begin at 1249563.80326
INFO: sending marker picture-end at 1249564.00482
INFO: sending marker incongruent-stimulus at 1249564.00488
INFO: sending marker picture-begin at 1249564.00503
INFO: sending marker picture-end at 1249564.15104
INFO: sending marker fixation-cross at 1249564.15111
INFO: sending marker crosshair-begin at 1249564.15138
INFO: sending marker arrow_left pressed at 1249564.31439
INFO: sending marker response-received-arrow_left at 1249564.31843
INFO: sending marker crosshair-end at 1249565.45345
INFO: sending marker response-window-end at 1249565.45355
INFO: sending marker response-was-correct at 1249565.45356
INFO: sending marker trial-end at 1249565.45357
````